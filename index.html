<!DOCTYPE html>
<html>
<head>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"/>
    <link type="text/css" rel="stylesheet" href="css/materialize.css"/>
    <script type="text/javascript" src="js/jquery-3.3.1.min.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta charset="utf-8"/>
</head>

<style>
    body {
        display: flex;
        min-height: 100vh;
        flex-direction: column;
    }

    main {
        flex: 1 0 auto;
    }

    .cronometro {
        font-size: 57px;
        font-family: "Helvetica Neue";
    }
</style>

<body class="grey lighten-2">
<nav>
    <div class="nav-wrapper green darken-2">
        <a href="#" class="brand-logo center">Datilografia</a>
    </div>
</nav>
<main>
    <div class="row">
        <br>
        <div class="row">
            <div class="col s12">
                <div class="left-align col s1 offset-l2">
                    <i class="large material-icons large">access_alarms</i>
                </div>
                <div class="cronometro col offset-s2">00:01:40</div>
                <br>
                <button class="btn col offset-s2 comeca">Começar</button>
            </div>
        </div>
        <div class="row jogo">
            <div class="col s12 m6 l8 offset-l2 offset-m2">
                <div class="card blue-grey darken-1">
                    <div class="card-content white-text">
                        <span class="card-title center">Datilografia</span>
                        <br>
                        <p class="principal"></p><br><br>
                        <form action="#" class="form">
                            <div class="input-field col s12">
                                <input name="texto" id="texto" type="text" class="texto" spellcheck="false" disabled autocomplete="off">
                                <label for="texto">Digite o texto</label>
                            </div>
                            <div class="row center">
                                <input type="submit" class="btn" value="verificar">
                                <a href="index.html" class="btn"><i class="large material-icons">refresh</i></a>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <div class="row cardResultado" hidden>
            <div class="col s12 m6 l8 offset-l2 offset-m2">
                <div class="card blue-grey darken-1">
                    <div class="card-content white-text">
                        <span class="card-title center">Resultados</span>
                        <div class="row">
                            <div class="col s5 offset-s1">
                                <div class="card white">
                                    <div class="card-content white-text">
                                        <span class="card-title center black-text">Acertos</span>
                                        <h5 class="center result black-text"></h5>
                                    </div>
                                </div>
                            </div>
                            <div class="col s5">
                                <div class="card white">
                                    <div class="card-content white-text">
                                        <span class="card-title center black-text">Erros</span>
                                        <h5 class="center erros black-text"></h5>
                                    </div>
                                </div>
                            </div>
                            <div class="col s10 offset-l1">
                                <div class="card white">
                                    <div class="card-content white-text">
                                        <span class="card-title center black-text">Frase</span>
                                        <h5 class="center frase black-text"></h5>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="center">
                            <a href="index.html" class="btn">Recomeçar</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</main>
<script type="text/javascript" src="js/materialize.min.js"></script>
<footer class="page-footer green darken-2">
    <div class="footer-copyright">
        <div class="container">
            © 2019 Copyright Text
            <a class="grey-text text-lighten-4 right" href="#!">More Links</a>
        </div>
    </div>
</footer>
</body>
</html>
<script>
    var isStarted = false;
    var tsorte = ["O Rio Grande do Norte é isso: sal, sol, nordeste. Barreira do Inferno, viagens espaciais, industrialização. Algodão do Seridó, salinas de Mossoró e miragens. Luta contra a seca, praias de areias coloridas, céu limpo. O último forte do folclore brasileiro, a melhor carne-de-sol do Brasil. O litoral potiguar tem um céu limpo todo o ano, ventos fracos e regulares, chuvas rápidas.",
        "Dizer que o chão (a pista, a escada etc.) está escorregando, pode bem ser o reflexo de uma dose a mais de uísque... Após a ressaca, chega-se logo à conclusão da forma correta:Escorregadio. Ex.: Chove, a pista está escorregadia; a empregada está fazendo limpeza. Cuidado! O piso está escorregadio etc."
        , "A datilografia é hoje encarada como um complemento cultural e técnico, indispensável a qualquer indivíduo, seja estudante, professor, comerciante, médico ou advogado."
        , "A máquina de escrever venceu em todos os setores de trabalho, e, para que se possa usufruir de todo o proveito que ela nos oferece, é necessário saber escrever com os dez dedos, conhecer a nomenclatura assim como as funções e utilidades de suas principais peças."
        , "Silenciou, com a morte de John Lennon, a voz mais enérgica de uma geração. Mas os jovens, de todas as idades, de todos os lugares e todas as épocas, não a esquecerão. John Lennon traduziu, em música e letra, na sua voz e na sua guitarra, tanto no seu comportamento público quanto no privado, a esperança por um mundo mais livre, mais pacífico e mais belo."
        , "Da festa de congraçamento nacional em que se transformou a participação brasileira na Copa do Mundo, a grande lição que fica e permanece é a de que o nosso povo é mobilizável para as grandes causas e possui um extraordinário espírito de solidariedade. O que faltava era tocar as cordas sensíveis desse povo."
        , "Do Amazonas ao mais humilde córrego do interior, os nossos rios desempenham um papel essencial na vida do País. E a cada dia se tornam mais importantes, porque têm de sobra uma coisa que anda fazendo falta em todo o mundo: nossos rios são ricos em energia."
        , "Seres primitivos, dotados de armadura, de placas espinhosas e escamas sobrepostas, sem mandíbula e com três olhos na cabeça deram origem, há 400 milhões de anos, às 30.000 espécies de peixes que conhecemos hoje."
        , "Medir o tempo foi sempre uma preocupação para os antigos, pois o tempo, que não podemos segurar ou guardar, só pode ser medido, registrando-se as repetições de acontecimentos periódicos."
        , "A energia pode apresentar-se na natureza sob as mais variadas formas: energia mecânica, elétrica, térmica, atômica (reatores nucleares), radiante (raios X, raios cósmicos, luz), etc..."]

    $(document).ready(function () {
        var sorteado = Math.floor(Math.random() * 10);
        console.log(sorteado);
        $('.principal').append(tsorte[sorteado]);
    });

    $('.comeca').click(function () {
        isStarted = true;
        $(".texto").removeAttr("disabled");
        startCountdown();
    });

    $('.form').submit(function () {
        var principal = $('.principal').text().split("");
        var texto = $('.texto').val().split("");
        var acertos = 0;
        var erros = 0;
        var diferencas = [];
        for (i = 0; i < texto.length; i++) {
            if (principal[i] === texto[i]) {
                acertos++;
            } else {
                erros++;
            }
        }
        for (i = 0; i < texto.length; i++) {
            if (principal[i] === texto[i]) {
                diferencas.push('<a class="green-text">' + texto[i] + '</a>')
            } else {
                diferencas.push('<a class="red-text">' + texto[i] + '</a>')
            }
        }
        for (i = 0; i < diferencas.length; i++) {
            $('.frase').append(diferencas[i]);
        }
        console.log('Quantidade: ' + texto.length);
        console.log('Acertos: ' + acertos);
        $('.cardResultado').removeAttr('hidden');
        $('.jogo').attr('hidden', '');
        $('.result').html(acertos);
        $('.erros').html(erros);
        $('.total').html(texto.length);
        isStarted = false;
        $('.comeca').attr('disabled', '');
        return false;
    });

    var tempo = new Number();
    tempo = 100;

    function startCountdown() {
        if (isStarted) {
            if ((tempo - 1) >= 0) {
                var min = parseInt(tempo / 60);
                var seg = tempo % 60;

                if (min < 10) {
                    min = "0" + min;
                    min = min.substr(0, 2);
                }
                if (seg <= 9) {
                    seg = "0" + seg;
                }
                horaImprimivel = '00:' + min + ':' + seg;
                $(".cronometro").html(horaImprimivel);
                setTimeout('startCountdown()', 1000);
                tempo--;

                if (min === '00' && seg === '01') {
                    M.toast({html: 'Seu tempo acabou :('});
                    isStarted = false;
                    horaImprimivel = '00:00:00';
                    $(".texto").attr("disabled", "");
                    $('.form').submit();
                }
            }
        }
    }

    //startCountdown();

</script>